extends layout
block content

    // shown when user is not logged in
    div(ng-hide='currentUser')
        form(ng-show="scenario == 'Log in'")
            h2 Log in
            | Username:
            input(type='text', ng-model='user.username')
            br
            | Password:
            input(type='password', ng-model='user.password')
            br
            button(ng-click='logIn(user)') Log in

    // shown when user is logged in
    div(ng-show='currentUser')
        #page(data-role='page')
            div(data-role='header', id='customHeader')
                h1 Welcome to Track-Houston!
            div(data-role='tabs')
                #one.ui-content
                    h1 Welcome {{currentUser.get('username')}}
                    p  You have been successfully logged in
                    button(ng-click='logOut(user)') Log out

                // admin navigation bar
                div(ng-hide='!isAdmin' data-role='navbar')
                    ul
                        li
                            a(id='ManNoteSetBUTT', href='#notes', data-theme='a', data-ajax='false') View Data
                        li
                            a(id='ManNoteSetBUTT', href='#inputRun', data-theme='a', data-ajax='false') Input Times
                        li
                            a(id='ManNoteSetBUTT', href='#adminCreateAccount', data-theme='a', data-ajax='false') Create Account

                // coach navigation bar
                div(ng-hide='!isCoach' data-role='navbar')
                    ul
                        li
                            a(id='ManNoteSetBUTT', href='#notes', data-theme='a', data-ajax='false') View Data
                        li
                            a(id='ManNoteSetBUTT', href='#inputTimes', data-theme='a', data-ajax='false') Input Times
                        li
                            a(id='ManNoteSetBUTT', href='#coachCreateAccount', data-theme='a', data-ajax='false') Update Roster

                // student navigation bar
                div(ng-hide='!isStudent' data-role='navbar')
                    ul
                        li
                            a(id='ManNoteSetBUTT', href='#notes', data-theme='a', data-ajax='false') View Data
                        li
                            a(id='ManNoteSetBUTT', href='#inputGrades', data-theme='a', data-ajax='false') Input Grades
                        li
                            a(id='ManNoteSetBUTT', href='#profile', data-theme='a', data-ajax='false') My Runs

                // form for admin to create new accounts
                #adminCreateAccount.ui-content
                    div(ng-hide="!isAdmin", id='acctTypeRadios')

                        // student radio button
                        input(id='studentType', type='radio', name='accountType', ng-click='newAcctTypeUpdate()',value='student')
                        label(for='studentType') Student

                        // coach radio button
                        input(id='coachType', type='radio', name='accountType', value='coach',ng-click='newAcctTypeUpdate()')
                        label(for='coachType') Coach

                        // admin radio button
                        input(id='adminType', type='radio', name='accountType', value='admin', ng-click='newAcctTypeUpdate()')
                        label(for='adminType') Admin

                    // form to create a new coach
                    form#coachForm(ng-hide="!isAdmin || newAcctType != 'coach'", method='post')

                        // create coach form header
                        h1 Create Coach Account

                        // new coach's first name
                        label(for='coachForm-fname') First name:
                        input#coachForm-fname(type='text', name='coachForm-fname')

                        // new coach's last name
                        label(for='coachForm-lname') Last name:
                        input#coachForm-lname(type='text', name='coachForm-lname')

                        // new coach's position
                        label(for='coachForm-position') Position:
                        input#coachForm-position(type='text', name='coachForm-position')

                        // new coach's home site
                        label(for='coachForm-hsite') Home Site:
                        input#coachForm-hsite(type='text', name='coachForm-hsite')

                        // new coach's email
                        label(for='coachForm-email') Email:
                        input#coachForm-email(type='text', name='coachForm-email')

                        // submit button for coach input form
                        button(ng-click='createCoach()', type='submit', data-inline='true', value='Submit') Create Coach

                        // success-message upon successful creation
                        | {{createCoachSuccess}}


                    // form to create a new admin
                    form#adminForm(ng-show="newAcctType=='admin'", ng-hide="!isAdmin || newAcctType != 'admin'", method='post')

                        // create admin form header
                        h1 Create Admin Account

                        // new admin's first name
                        label(for='fname') First name:
                        input#adminForm-fname(type='text', name='adminForm-fname')

                        // new admin's last name
                        label(for='lname') Last name:
                        input#adminForm-lname(type='text', name='adminForm-lname')

                        // new admin's email address
                        label(for='email') Email:
                        input#adminForm-email(type='text', name='adminForm-email')

                        // submit button for coach input form
                        button(ng-click='createAdmin()', type='submit', data-inline='true', value='Submit') Create Admin

                        // success-message upon successful creation
                        | {{createAdminSuccess}}

                    // form to create a new student
                    form#studentForm-admin(ng-show="newAcctType=='student'", ng-hide="!isStudent", method='post')

                        // create student form header
                        h1 Create Student Account

                        // new student's first name
                        label(for='studentForm-fname') First name:
                        input#studenForm-fname(type='text', name='studentForm-fname')

                        // new student's last name
                        label(for='studentForm-lname') Last name:
                        input#studentForm-lname(type='text', name='studentForm-lname')

                        // new student's parent's name
                        label(for='studentForm-parentName') Parent's full name:
                        input#studentForm-parentsName(type='text', name='studentForm-parentName')

                        // new student's birth year
                        label(for='studentForm-birthYear') Birth year:
                        input#studentForm-birthYear(type='studentForm-birthYear', name='studentForm-birthYear')

                        // new student's practice site
                        label(for='studentForm-practiceSite') Practice site:
                        input#studentForm-practiceSite(type='text', name='studentForm-practiceSite')

                        // submit button for student input form
                        button(ng-click='submitStudentForm()', type='submit', data-inline='true', value='Submit') Create Account

                        // success-message upon successful creation
                        | {{createStudentSuccess}}

                #coachCreateAccount(ng-hide="!isCoach").ui-content
                    // form to create a new student
                    form#studentForm-coach(ng-show="isCoach", method='post')

                        // create student form header
                        h1 Create Student Account

                        // new student's first name
                        label(for='studentForm-fname-coach') First name:
                        input#studenForm-fname(type='text', name='studentForm-fname-coach')

                        // new student's last name
                        label(for='studentForm-lname-coach') Last name:
                        input#studentForm-lname(type='text', name='studentForm-lname-coach')

                        // new student's parent's name
                        label(for='studentForm-parentName-coach') Parent's full name:
                        input#studentForm-parentName(type='text', name='studentForm-parentName-coach')

                        // new student's birth year
                        label(for='studentForm-birthYear-coach') Birth year:
                        input#studentForm-birthYear(type='studentForm-birthYear-coach', name='studentForm-birthYear-coach')

                        // new student's practice site
                        label(for='studentForm-practiceSite') Practice site:
                        input#studentForm-practiceSite(type='text', name='studentForm-practiceSite')

                        // submit button for student input form
                        button(ng-click='submitStudentForm()', type='submit', data-inline='true', value='Submit') Create Account

                        // success-message upon successful creation
                        | {{createStudentSuccess}}

                    form#athleteForm(method='post')
                        h1 Create Student Account
                        label(for='fname') First name:
                        input#fname(type='text', name='fname')
                        label(for='lname') Last name:
                        input#lname(type='text', name='lname')
                        label(for='parentsname') Parent's name:
                        input#parentsname(type='text', name='parentsname')
                        label(for='bday') Date of Birth:
                        input#bday(type='date', name='bday')
                        label(for='practice') Practice site:
                        input#practicesite(type='text', name='practicesite')
                        button(ng-click='submitAthleteForm()', type='submit', data-inline='true', value='Submit') Create Account

                #notes.ui-content
                    label(for='searchStudentsNoteInput') Search for a student by name:
                    input#searchStudentsNoteInput(type='search', name='searchStudentsNoteInput')
                    table#runTable.ui-body-d.ui-shadow.table-stripe.ui-responsive(data-role='table', data-mode='', data-column-btn-theme='b', data-column-btn-text='Columns to')
                | {{createRunTable()}}

                #inputRun.ui-content
                    // Div to enter run data
                    h1 Input New Run
                    form#runForm(method='post')
                        // start of runForm
                        // Date
                        label(for='date') Event Date:
                        input#datepicker1(type='date', data-clear-btn='false', name='date', val=(new Date()))
                        // Event
                        fieldset.ui-field-contain
                            label(for='event') Select Event
                            select#event(name='event')
                                option(value='100m') 100 Meters
                                option(value='200m') 200 Meters
                                option(value='400m') 400 Meters
                                option(value='1mi') 1 Mile
                                option(value='2mi') 2 Miles
                                option(value='other') Other
                                // TODO if "other" is selected redirect to "create event" link
                        // Name
                        fieldset.ui-field-contain
                            label(for='event') Select Athlete
                            select#name(name='name')
                                option(value='Maria') Maria
                                option(value='Watson') Watson
                                option(value='Carmello') Carmello
                                option(value='other') Other
                                // TODO if "other" is selected redirect to "create user" link

                        // Submit button
                        label Time:
                        input#time(type='number', name='time', placeholder='Decimal', ng-model='myDecimal', step='any')
                        input(ng-click='submitRunForm()', type='submit', data-inline='true', value='Submit New Time')